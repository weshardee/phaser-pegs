!function t(e,r,i){function o(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r?r:t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t,e,r){for(var i=!0;i;){var o=t,n=e,a=r;i=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=n,r=a,i=!0,s=l=void 0}},s=t("./states/GameState"),u=i(s),l=function(t){function e(){o(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,500,500,Phaser.AUTO,"content",null),this.state.add("GameState",u["default"],!1),this.state.start("GameState")}return n(e,t),e}(Phaser.Game);new l},{"./states/GameState":3}],2:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=t("../utils/constants"),n=1,a=function s(t,e,r,a){i(this,s),this.id=n++,this.game=t,this.sprite=this.game.add.sprite(r,a,"pegs",Math.floor(Math.random()*o.NUM_PEG_TYPES),e),this.sprite.anchor.x=.5,this.sprite.anchor.y=.8,this.sprite.inputEnabled=!0};r["default"]=a,e.exports=r["default"]},{"../utils/constants":5}],3:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(t,e,r){for(var i=!0;i;){var o=t,n=e,a=r;i=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=n,r=a,i=!0,s=l=void 0}},u=t("../utils/Grid"),l=i(u),c=t("../objects/Peg"),d=i(c),h=t("../utils/position"),f=t("../utils/constants"),v="images/tiles.png",p="images/pegs.png",y=function(t){function e(){o(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return n(e,t),a(e,[{key:"preload",value:function(){this.game.load.audio("jump",f.AUDIO_JUMP_URI),this.game.load.audio("error",f.AUDIO_ERROR_URI),this.game.load.spritesheet("tiles",v,65,89,f.NUM_TILE_TYPES),this.game.load.spritesheet("pegs",p,40,66,f.NUM_PEG_TYPES),this.game.load.image("reset",f.RESET_URI,190,49)}},{key:"create",value:function(){this.game.stage.backgroundColor=3355443,this.grid=new l["default"](f.BOARD_SIZE),this.boardGroup=this.game.add.group(void 0,"board"),this.tilesGroup=this.game.add.group(this.boardGroup,"tiles"),this.pegsGroup=this.game.add.group(this.boardGroup,"pegs"),this.deadPegsGroup=this.game.add.group(this.boardGroup,"deadPegs");var t=!0,e=!1,r=void 0;try{for(var i,o=this.grid[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var n=i.value,a=n.x,s=n.y,u=(0,h.getGamePosition)(a,s);this.addTile(u),s>0&&(this.addPeg(u),this.grid.fill({x:a,y:s}))}}catch(c){e=!0,r=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw r}}this.grid.log(),this.boardGroup.x=f.MIDDLE,this.boardGroup.y=1.6*(f.MIDDLE-this.boardGroup.height/2),this.game.add.button(0,0,"reset",this.reset,this)}},{key:"reset",value:function(){this.game.state.start("GameState",!0,!1)}},{key:"addTile",value:function(t){var e=t.x,r=t.y,i=this.game.add.sprite(e,r,"tiles",0,this.tilesGroup);i.anchor.x=.5,i.anchor.y=.375,i.inputEnabled=!0,i.events.onInputUp.add(this.onTileClick,this)}},{key:"onTileClick",value:function(t){var e=(0,h.getGridPosition)(t);this.excited&&this.jumpTo(e)}},{key:"jumpTo",value:function(t){this.game.sound.play("jump");var e=(0,h.getGridPosition)(this.excited),r=this.isValidMove(e,t);if(!r)return this.disappoint();var i=this.getMiddle(e,t);this.grid.fill(t),this.grid.empty(e),this.grid.empty(i);var o=(0,h.getGamePosition)(t.x,t.y);this.game.tweens.create(this.excited).to(o,f.JUMP_DURATION,Phaser.Easing.Back.InOut).start(),this.excitedTween.loop(!1),this.excited=null;var n=this.getPegAt(i);this.kill(n),this.grid.log()}},{key:"kill",value:function(t){this.game.tweens.create(t).to({alpha:f.DEATH_ALPHA},f.DEATH_DURATION).start(),this.game.tweens.create(t.scale).to(f.DEATH_SCALE,f.DEATH_DURATION).start(),this.pegsGroup.remove(t),this.deadPegsGroup.add(t)}},{key:"isValidMove",value:function(t,e){var r=this.getMiddle(t,e);return this.grid.isEmpty(r)?!1:this.grid.isEmpty(e)?r:!1}},{key:"getPegAt",value:function(t){var e=t.x,r=t.y,i=this.pegsGroup.children.find(function(t){var i=(0,h.getGridPosition)(t);return i.x===e&&i.y===r?!0:!1});return i}},{key:"getMiddle",value:function(t,e){var r=t.x-e.x,i=t.y-e.y;return{x:r/2+e.x,y:i/2+e.y}}},{key:"addPeg",value:function(t){var e=t.x,r=t.y,i=new d["default"](this.game,this.pegsGroup,e,r);return i.sprite.events.onInputUp.add(this.onPegClick,this),i}},{key:"onPegClick",value:function(t){this.excited&&this.disappoint();var e=(0,h.getGridPosition)(t);this.hasValidMoves(e)?(this.excite(t),this.selected=t):this.shake(t)}},{key:"excite",value:function(t){var e=.05,r=90,i=this.game.tweens.create(t).to({rotation:e},r,Phaser.Easing.Back.Out).to({rotation:0},r,Phaser.Easing.Linear.None).to({rotation:-e},r,Phaser.Easing.Back.Out).to({rotation:0},r,Phaser.Easing.Linear.None).loop(!0).start();this.excited=t,this.excitedTween=i}},{key:"disappoint",value:function(){this.shake(this.excited),this.excitedTween.loop(!1),this.excited=null}},{key:"shake",value:function(t){var e=100,r=5,i={x:t.x},o={x:t.x+r},n={x:t.x-r};this.game.tweens.create(t).to(n,e/4).to(o,e/2).to(i,e/4).start(),this.game.sound.play("error")}},{key:"hasValidMoves",value:function(t){var e=t.x,r=t.y,i=2,o={x:e,y:r},n=[{x:e,y:r+i},{x:e,y:r-i},{x:e-i,y:r-i},{x:e+i,y:r+i},{x:e+i,y:r},{x:e-i,y:r}];for(var a in n){var s=n[a];if(this.isValidMove(o,s))return!0}return!1}},{key:"hasPeg",value:function(t,e){return this.isOutOfBounds(t,e)?!1:void 0}},{key:"getId",value:function(t,e){var r=this.grid[e];if(void 0===r)return!0;var i=r[t];return void 0===i?!0:void 0}}]),e}(Phaser.State);r["default"]=y,e.exports=r["default"]},{"../objects/Peg":2,"../utils/Grid":4,"../utils/constants":5,"../utils/position":6}],4:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=t("./constants"),a=function(){function t(e){i(this,t),this.size=e,this.rows=new Array(e);for(var r=0;e>r;r++){var o=new Array(r+1);o.fill(n.EMPTY),this.rows[r]=o}this.log()}return o(t,[{key:Symbol.iterator,value:function(){var t=this,e=0,r=0;return{next:function(){var i=r===t.size,o=i?void 0:t.rows[r][e],n={x:e,y:r,id:o};return e===r?(e=0,r++):e++,{value:n,done:i}}}}},{key:"getPosition",value:function(t){var e=t.x,r=t.y,i=this.rows[r];return void 0===i?void 0:i[e]}},{key:"empty",value:function(t){var e=t.x,r=t.y;this.rows[r][e]=n.EMPTY}},{key:"fill",value:function(t){var e=t.x,r=t.y;this.rows[r][e]=n.FULL}},{key:"log",value:function(){for(var t=0;t<this.size;t++)console.log(this.rows[t])}},{key:"isEmpty",value:function(t){var e=t.x,r=t.y;return this.getPosition({x:e,y:r})===n.EMPTY}}]),t}();r["default"]=a,e.exports=r["default"]},{"./constants":5}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i="sounds/error.mp3";r.AUDIO_ERROR_URI=i;var o="sounds/jump.mp3";r.AUDIO_JUMP_URI=o;var n="images/return.png";r.RESET_URI=n;var a=5;r.BOARD_SIZE=a;var s=0;r.EMPTY=s;var u=1;r.FULL=u;var l=void 0;r.OFF_BOARD=l;var c=500;r.GAME_SIZE=c;var d=c/2;r.MIDDLE=d;var h=65;r.TILE_SIZE=h;var f=5;r.NUM_PEG_TYPES=f;var v=4;r.NUM_TILE_TYPES=v;var p=.8;r.Y_HEX_FACTOR=p;var y=200;r.DEATH_DURATION=y;var g=0;r.DEATH_ALPHA=g;var E={x:0,y:0};r.DEATH_SCALE=E;var _=200;r.JUMP_DURATION=_},{}],6:[function(t,e,r){"use strict";function i(t){return a.BOARD_SIZE-t*a.TILE_SIZE/2}function o(t,e){var r=t*a.TILE_SIZE+i(e),o=e*a.TILE_SIZE*a.Y_HEX_FACTOR;return{x:r,y:o}}function n(t){var e=Math.round(t.y/a.TILE_SIZE/a.Y_HEX_FACTOR),r=Math.round((t.x-i(e))/a.TILE_SIZE);return{x:r,y:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.getGamePosition=o,r.getGridPosition=n;var a=t("./constants")},{"./constants":5}]},{},[1]);