!function t(e,i,r){function o(n,s){if(!i[n]){if(!e[n]){var u="function"==typeof require&&require;if(!s&&u)return u(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[n]={exports:{}};e[n][0].call(c.exports,function(t){var i=e[n][1][t];return o(i?i:t)},c,c.exports,t,e,i,r)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<r.length;n++)o(r[n]);return o}({1:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n=function(t,e,i){for(var r=!0;r;){var o=t,a=e,n=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(n)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=a,i=n,r=!0,s=l=void 0}},s=t("./states/GameState"),u=r(s),l=function(t){function e(){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,500,500,Phaser.AUTO,"content",null),this.state.add("GameState",u["default"],!1),this.state.start("GameState")}return a(e,t),e}(Phaser.Game);new l},{"./states/GameState":3}],2:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=t("../utils/constants"),a=1,n=function s(t,e,i,n){r(this,s),this.id=a++,this.game=t,this.sprite=this.game.add.sprite(i,n,"pegs",Math.floor(Math.random()*o.NUM_PEG_TYPES),e),this.sprite.anchor.x=.5,this.sprite.anchor.y=.8,this.sprite.inputEnabled=!0};i["default"]=n,e.exports=i["default"]},{"../utils/constants":5}],3:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(t,e,i){for(var r=!0;r;){var o=t,a=e,n=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(n)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=a,i=n,r=!0,s=l=void 0}},u=t("../utils/Grid"),l=r(u),c=t("../objects/Peg"),d=r(c),h=t("../utils/position"),f=t("../utils/constants"),p="images/tiles.png",v="images/pegs.png",y=function(t){function e(){o(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),n(e,[{key:"preload",value:function(){this.game.load.audio("jump",f.AUDIO_JUMP_URI),this.game.load.audio("error",f.AUDIO_ERROR_URI),this.game.load.spritesheet("tiles",p,65,89,f.NUM_TILE_TYPES),this.game.load.spritesheet("pegs",v,40,66,f.NUM_PEG_TYPES),this.game.load.image("reset",f.RESET_URI,190,49)}},{key:"create",value:function(){this.game.stage.backgroundColor=3355443,this.grid=new l["default"](f.BOARD_SIZE),this.boardGroup=this.game.add.group(void 0,"board"),this.tilesGroup=this.game.add.group(this.boardGroup,"tiles"),this.pegsGroup=this.game.add.group(this.boardGroup,"pegs"),this.deadPegsGroup=this.game.add.group(this.boardGroup,"deadPegs");var t=!0,e=!1,i=void 0;try{for(var r,o=this.grid[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,n=a.x,s=a.y,u=(0,h.getGamePosition)(n,s);this.addTile(u)}}catch(c){e=!0,i=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw i}}this.boardGroup.x=f.MIDDLE,this.boardGroup.y=1.6*(f.MIDDLE-this.boardGroup.height/2),this.game.add.button(0,0,"reset",this.reset,this),this.isPopulated=!1;var d={fill:"#ffffff"};this.endMessage=this.game.add.text(this.world.width-20,14,"",d),this.endMessage.anchor.x=1,this.endMessage.alpha=0}},{key:"populate",value:function(t){this.isPopulated=!0;var e=!0,i=!1,r=void 0;try{for(var o,a=this.grid[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var n=o.value,s=n.x,u=n.y,l=(0,h.getGamePosition)(s,u);(s!==t.x||u!==t.y)&&(this.addPeg(l),this.grid.fill({x:s,y:u}))}}catch(c){i=!0,r=c}finally{try{!e&&a["return"]&&a["return"]()}finally{if(i)throw r}}}},{key:"empty",value:function(){var t=this;this.isPopulated=!1,this.pegsGroup.children.slice().forEach(function(e){t.kill(e)})}},{key:"reset",value:function(){this.isPopulated=!1,this.empty(),this.game.tweens.create(this.endMessage).to({alpha:0},f.FADE_DURATION).start()}},{key:"addTile",value:function(t){var e=t.x,i=t.y,r=this.game.add.sprite(e,i,"tiles",0,this.tilesGroup);r.anchor.x=.5,r.anchor.y=.375,r.inputEnabled=!0,r.events.onInputUp.add(this.onTileClick,this)}},{key:"onTileClick",value:function(t){var e=(0,h.getGridPosition)(t);this.excited?this.jumpTo(e):this.isPopulated||this.populate(e)}},{key:"jumpTo",value:function(t){this.game.sound.play("jump");var e=(0,h.getGridPosition)(this.excited),i=this.isValidMove(e,t);if(!i)return this.disappoint();var r=this.getMiddle(e,t);this.grid.fill(t),this.grid.empty(e),this.grid.empty(r);var o=(0,h.getGamePosition)(t.x,t.y);this.game.tweens.create(this.excited).to(o,f.JUMP_DURATION,Phaser.Easing.Back.InOut).start(),this.excitedTween.loop(!1),this.excited=null;var a=this.getPegAt(r);this.kill(a)}},{key:"kill",value:function(t){var e=this;this.game.tweens.create(t).to({alpha:f.DEATH_ALPHA},f.DEATH_DURATION).start();var i=this.game.tweens.create(t.scale).to(f.DEATH_SCALE,f.DEATH_DURATION);i.onComplete.add(function(){t.destroy(),e.checkPegs()}),i.start(),this.pegsGroup.remove(t),this.deadPegsGroup.add(t)}},{key:"isValidMove",value:function(t,e){var i=this.getMiddle(t,e);return this.grid.isEmpty(i)?!1:this.grid.isEmpty(e)?i:!1}},{key:"getPegAt",value:function(t){var e=t.x,i=t.y,r=this.pegsGroup.children.find(function(t){var r=(0,h.getGridPosition)(t);return r.x===e&&r.y===i?!0:!1});return r}},{key:"getMiddle",value:function(t,e){var i=t.x-e.x,r=t.y-e.y;return{x:i/2+e.x,y:r/2+e.y}}},{key:"addPeg",value:function(t){var e=t.x,i=t.y,r=new d["default"](this.game,this.pegsGroup,e,i);return r.sprite.events.onInputUp.add(this.onPegClick,this),this.game.tweens.create(r.sprite).from({y:"-"+f.GAME_SIZE},f.FALL_DURATION,Phaser.Easing.Bounce.Out).delay(200*Math.random()).start(),r}},{key:"onPegClick",value:function(t){this.excited&&this.disappoint();var e=(0,h.getGridPosition)(t);this.hasValidMoves(e)?(this.excite(t),this.selected=t):this.shake(t)}},{key:"excite",value:function(t){var e=.05,i=90,r=this.game.tweens.create(t).to({rotation:e},i,Phaser.Easing.Back.Out).to({rotation:0},i,Phaser.Easing.Linear.None).to({rotation:-e},i,Phaser.Easing.Back.Out).to({rotation:0},i,Phaser.Easing.Linear.None).loop(!0).start();this.excited=t,this.excitedTween=r}},{key:"disappoint",value:function(){this.shake(this.excited),this.excitedTween.loop(!1),this.excited=null}},{key:"shake",value:function(t){var e=100,i=5,r={x:t.x},o={x:t.x+i},a={x:t.x-i};this.game.tweens.create(t).to(a,e/4).to(o,e/2).to(r,e/4).start(),this.game.sound.play("error")}},{key:"checkPegs",value:function(){var t=this;this.pegsGroup.forEach(function(e){var i=(0,h.getGridPosition)(e);e.alive=t.hasValidMoves(i)}),null===this.pegsGroup.getFirstAlive()&&this.end()}},{key:"end",value:function(){var t=this.pegsGroup.countDead();if(0!==t){var e=["Just Plain Eg-no-ra-moose","You're a Genius","You're Pretty Smart","Just Plain Dumb"];this.endMessage.text=e[0],4>t&&(this.endMessage.text=e[t]),this.game.tweens.create(this.endMessage).to({alpha:1},f.FADE_DURATION).start()}}},{key:"hasValidMoves",value:function(t){var e=t.x,i=t.y,r=2,o={x:e,y:i},a=[{x:e,y:i+r},{x:e,y:i-r},{x:e-r,y:i-r},{x:e+r,y:i+r},{x:e+r,y:i},{x:e-r,y:i}];for(var n in a){var s=a[n];if(this.isValidMove(o,s))return!0}return!1}},{key:"hasPeg",value:function(t,e){return this.isOutOfBounds(t,e)?!1:void 0}},{key:"getId",value:function(t,e){var i=this.grid[e];if(void 0===i)return!0;var r=i[t];return void 0===r?!0:void 0}}]),e}(Phaser.State);i["default"]=y,e.exports=i["default"]},{"../objects/Peg":2,"../utils/Grid":4,"../utils/constants":5,"../utils/position":6}],4:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("./constants"),n=function(){function t(e){r(this,t),this.size=e,this.rows=new Array(e);for(var i=0;e>i;i++){var o=new Array(i+1);o.fill(a.EMPTY),this.rows[i]=o}}return o(t,[{key:Symbol.iterator,value:function(){var t=this,e=0,i=0;return{next:function(){var r=i===t.size,o=r?void 0:t.rows[i][e],a={x:e,y:i,id:o};return e===i?(e=0,i++):e++,{value:a,done:r}}}}},{key:"getPosition",value:function(t){var e=t.x,i=t.y,r=this.rows[i];return void 0===r?void 0:r[e]}},{key:"empty",value:function(t){var e=t.x,i=t.y;this.rows[i][e]=a.EMPTY}},{key:"fill",value:function(t){var e=t.x,i=t.y;this.rows[i][e]=a.FULL}},{key:"log",value:function(){for(var t=0;t<this.size;t++)console.log(this.rows[t])}},{key:"isEmpty",value:function(t){var e=t.x,i=t.y;return this.getPosition({x:e,y:i})===a.EMPTY}}]),t}();i["default"]=n,e.exports=i["default"]},{"./constants":5}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=200;i.FADE_DURATION=r;var o="sounds/error.mp3";i.AUDIO_ERROR_URI=o;var a="sounds/jump.mp3";i.AUDIO_JUMP_URI=a;var n="images/return.png";i.RESET_URI=n;var s=5;i.BOARD_SIZE=s;var u=0;i.EMPTY=u;var l=1;i.FULL=l;var c=void 0;i.OFF_BOARD=c;var d=500;i.GAME_SIZE=d;var h=d/2;i.MIDDLE=h;var f=65;i.TILE_SIZE=f;var p=5;i.NUM_PEG_TYPES=p;var v=4;i.NUM_TILE_TYPES=v;var y=.8;i.Y_HEX_FACTOR=y;var g=600;i.FALL_DURATION=g;var E=200;i.DEATH_DURATION=E;var P=0;i.DEATH_ALPHA=P;var _={x:0,y:0};i.DEATH_SCALE=_;var m=200;i.JUMP_DURATION=m},{}],6:[function(t,e,i){"use strict";function r(t){return n.BOARD_SIZE-t*n.TILE_SIZE/2}function o(t,e){var i=t*n.TILE_SIZE+r(e),o=e*n.TILE_SIZE*n.Y_HEX_FACTOR;return{x:i,y:o}}function a(t){var e=Math.round(t.y/n.TILE_SIZE/n.Y_HEX_FACTOR),i=Math.round((t.x-r(e))/n.TILE_SIZE);return{x:i,y:e}}Object.defineProperty(i,"__esModule",{value:!0}),i.getGamePosition=o,i.getGridPosition=a;var n=t("./constants")},{"./constants":5}]},{},[1]);