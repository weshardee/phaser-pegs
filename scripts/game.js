!function t(e,r,i){function o(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r?r:t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var n="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t,e,r){for(var i=!0;i;){var o=t,n=e,a=r;i=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=n,r=a,i=!0,s=l=void 0}},s=t("./states/GameState"),u=i(s),l=function(t){function e(){o(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,500,500,Phaser.AUTO,"content",null),this.state.add("GameState",u["default"],!1),this.state.start("GameState")}return n(e,t),e}(Phaser.Game);new l},{"./states/GameState":4}],2:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=t("../utils/constants"),n=1,a=function s(t,e,r,a){i(this,s),this.id=n++,this.game=t,this.sprite=this.game.add.sprite(r,a,"pegs",Math.floor(Math.random()*o.NUM_PEG_TYPES),e),this.sprite.anchor.x=.5,this.sprite.anchor.y=.8,this.sprite.inputEnabled=!0};r["default"]=a,e.exports=r["default"]},{"../utils/constants":7}],3:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var n=function(t,e,r){for(var i=!0;i;){var o=t,n=e,a=r;i=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=n,r=a,i=!0,s=l=void 0}},a=.5,s=.375,u=function(t){function e(t,r,o,u,l){i(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r,o,"tiles",0),this.anchor.x=a,this.anchor.y=s,this.inputEnabled=!0,this.events.onInputUp.add(u,l)}return o(e,t),e}(Phaser.Sprite);r["default"]=u,e.exports=r["default"]},{}],4:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(t,e,r){for(var i=!0;i;){var o=t,n=e,a=r;i=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var l=Object.getPrototypeOf(o);if(null===l)return void 0;t=l,e=n,r=a,i=!0,s=l=void 0}},u=t("../utils/Grid"),l=i(u),c=t("../objects/Peg"),d=i(c),f=t("../objects/Tile"),h=i(f),p=t("../utils/position"),v=t("../utils/animations.js"),y=t("../utils/constants"),g="images/tiles.png",_="images/pegs.png",P=function(t){function e(){o(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return n(e,t),a(e,[{key:"preload",value:function(){this.game.load.audio("jump",y.AUDIO_JUMP_URI),this.game.load.audio(v.AUDIO_ERROR_ID,y.AUDIO_ERROR_URI),this.game.load.spritesheet("tiles",g,65,89,y.NUM_TILE_TYPES),this.game.load.spritesheet("pegs",_,40,66,y.NUM_PEG_TYPES),this.game.load.image("reset",y.RESET_URI,190,49)}},{key:"create",value:function(){this.game.stage.backgroundColor=3355443,this.boardGroup=this.game.add.group(void 0,"board"),this.tilesGroup=this.game.add.group(this.boardGroup,"tiles"),this.pegsGroup=this.game.add.group(this.boardGroup,"pegs"),this.deadPegsGroup=this.game.add.group(this.boardGroup,"deadPegs"),this.grid=new l["default"](y.BOARD_SIZE);var t=!0,e=!1,r=void 0;try{for(var i,o=this.grid[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var n=i.value,a=n.x,s=n.y,u=(0,p.getGamePosition)(a,s);this.addTile(u)}}catch(c){e=!0,r=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw r}}this.boardGroup.x=y.MIDDLE,this.boardGroup.y=1.6*(y.MIDDLE-this.boardGroup.height/2),this.game.add.button(0,0,"reset",this.reset,this),this.isPopulated=!1;var d={fill:"#ffffff"};this.endMessage=this.game.add.text(this.world.width-20,14,"",d),this.endMessage.anchor.x=1,this.endMessage.alpha=0}},{key:"populate",value:function(t){this.isPopulated=!0;var e=!0,r=!1,i=void 0;try{for(var o,n=this.grid[Symbol.iterator]();!(e=(o=n.next()).done);e=!0){var a=o.value,s=a.x,u=a.y,l=(0,p.getGamePosition)(s,u);(s!==t.x||u!==t.y)&&(this.addPeg(l),this.grid.fill({x:s,y:u}))}}catch(c){r=!0,i=c}finally{try{!e&&n["return"]&&n["return"]()}finally{if(r)throw i}}}},{key:"reset",value:function(){var t=this;this.isPopulated=!1,this.grid.emptyAll(),this.pegsGroup.children.slice().forEach(function(e){t.kill(e)}),this.game.tweens.create(this.endMessage).to({alpha:0},y.FADE_DURATION).start()}},{key:"addTile",value:function(t){var e=t.x,r=t.y,i=new h["default"](this.game,e,r,this.onTileClick,this);this.tilesGroup.add(i)}},{key:"onTileClick",value:function(t){var e=(0,p.getGridPosition)(t);this.excited?this.jumpTo(e):this.isPopulated||this.populate(e)}},{key:"jumpTo",value:function(t){this.game.sound.play("jump");var e=(0,p.getGridPosition)(this.excited),r=this.grid.isValidMove(e,t);if(!r)return this.disappoint();var i=this.grid.getMiddle(e,t);this.grid.fill(t),this.grid.empty(e),this.grid.empty(i);var o=(0,p.getGamePosition)(t.x,t.y);this.game.tweens.create(this.excited).to(o,y.JUMP_DURATION,Phaser.Easing.Back.InOut).start(),this.excitedTween.loop(!1),this.excited=null;var n=this.getPegAt(i);this.kill(n)}},{key:"kill",value:function(t){var e=this;this.game.tweens.create(t).to({alpha:y.DEATH_ALPHA},y.DEATH_DURATION).start();var r=this.game.tweens.create(t.scale).to(y.DEATH_SCALE,y.DEATH_DURATION);r.onComplete.add(function(){t.destroy(),e.checkPegs()}),r.start(),this.pegsGroup.remove(t),this.deadPegsGroup.add(t)}},{key:"getPegAt",value:function(t){var e=t.x,r=t.y,i=this.pegsGroup.children.find(function(t){var i=(0,p.getGridPosition)(t);return i.x===e&&i.y===r?!0:!1});return i}},{key:"addPeg",value:function(t){var e=t.x,r=t.y,i=new d["default"](this.game,this.pegsGroup,e,r);return i.sprite.events.onInputUp.add(this.onPegClick,this),this.game.tweens.create(i.sprite).from({y:"-"+y.GAME_SIZE},y.FALL_DURATION,Phaser.Easing.Bounce.Out).delay(200*Math.random()).start(),i}},{key:"onPegClick",value:function(t){this.excited&&this.disappoint();var e=(0,p.getGridPosition)(t);this.grid.hasValidMoves(e)?(this.excite(t),this.selected=t):(0,v.shake)(t)}},{key:"excite",value:function(t){var e=.05,r=90,i=this.game.tweens.create(t).to({rotation:e},r,Phaser.Easing.Back.Out).to({rotation:0},r,Phaser.Easing.Linear.None).to({rotation:-e},r,Phaser.Easing.Back.Out).to({rotation:0},r,Phaser.Easing.Linear.None).loop(!0).start();this.excited=t,this.excitedTween=i}},{key:"disappoint",value:function(){(0,v.shake)(this.excited),this.excitedTween.loop(!1),this.excited=null}},{key:"checkPegs",value:function(){var t=this;this.pegsGroup.forEach(function(e){var r=(0,p.getGridPosition)(e);e.alive=t.grid.hasValidMoves(r)}),null===this.pegsGroup.getFirstAlive()&&this.end()}},{key:"end",value:function(){var t=this.pegsGroup.countDead();if(0!==t){var e=["Just Plain Eg-no-ra-moose","You're a Genius","You're Pretty Smart","Just Plain Dumb"];this.endMessage.text=e[0],4>t&&(this.endMessage.text=e[t]),this.game.tweens.create(this.endMessage).to({alpha:1},y.FADE_DURATION).start()}}},{key:"hasPeg",value:function(t,e){return this.isOutOfBounds(t,e)?!1:void 0}},{key:"getId",value:function(t,e){var r=this.grid[e];if(void 0===r)return!0;var i=r[t];return void 0===i?!0:void 0}}]),e}(Phaser.State);r["default"]=P,e.exports=r["default"]},{"../objects/Peg":2,"../objects/Tile":3,"../utils/Grid":5,"../utils/animations.js":6,"../utils/constants":7,"../utils/position":8}],5:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),n=t("./constants"),a=function(){function t(e){i(this,t),this.size=e,this.rows=new Array(e);for(var r=0;e>r;r++){var o=new Array(r+1);o.fill(n.EMPTY),this.rows[r]=o}}return o(t,[{key:Symbol.iterator,value:function(){var t=this,e=0,r=0;return{next:function(){var i=r===t.size,o=i?void 0:t.rows[r][e],n={x:e,y:r,id:o};return e===r?(e=0,r++):e++,{value:n,done:i}}}}},{key:"getPosition",value:function(t){var e=t.x,r=t.y,i=this.rows[r];return void 0===i?void 0:i[e]}},{key:"empty",value:function(t){var e=t.x,r=t.y;this.rows[r][e]=n.EMPTY}},{key:"emptyAll",value:function(){var t=!0,e=!1,r=void 0;try{for(var i,o=this[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var n=i.value,a=n.x,s=n.y;this.empty({x:a,y:s})}}catch(u){e=!0,r=u}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw r}}}},{key:"fill",value:function(t){var e=t.x,r=t.y;this.rows[r][e]=n.FULL}},{key:"log",value:function(){for(var t=0;t<this.size;t++)console.log(this.rows[t])}},{key:"isEmpty",value:function(t){var e=t.x,r=t.y;return this.getPosition({x:e,y:r})===n.EMPTY}},{key:"hasValidMoves",value:function(t){var e=t.x,r=t.y,i=2,o={x:e,y:r},n=[{x:e,y:r+i},{x:e,y:r-i},{x:e-i,y:r-i},{x:e+i,y:r+i},{x:e+i,y:r},{x:e-i,y:r}];for(var a in n){var s=n[a];if(this.isValidMove(o,s))return!0}return!1}},{key:"isValidMove",value:function(t,e){var r=this.getMiddle(t,e);return this.isEmpty(r)?!1:this.isEmpty(e)?!0:!1}},{key:"getMiddle",value:function(t,e){var r=t.x-e.x,i=t.y-e.y;return{x:r/2+e.x,y:i/2+e.y}}}]),t}();r["default"]=a,e.exports=r["default"]},{"./constants":7}],6:[function(t,e,r){"use strict";function i(t){var e=t.game,r=t.x,i={x:r},s={x:r+n},u={x:r-n};return e.sound.play(a),e.tweens.create(t).to(u,o/4).to(s,o/2).to(i,o/4).start()}Object.defineProperty(r,"__esModule",{value:!0}),r.shake=i;var o=100,n=5,a="error";r.AUDIO_ERROR_ID=a},{}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=200;r.FADE_DURATION=i;var o="sounds/error.mp3";r.AUDIO_ERROR_URI=o;var n="sounds/jump.mp3";r.AUDIO_JUMP_URI=n;var a="images/return.png";r.RESET_URI=a;var s=5;r.BOARD_SIZE=s;var u=0;r.EMPTY=u;var l=1;r.FULL=l;var c=void 0;r.OFF_BOARD=c;var d=500;r.GAME_SIZE=d;var f=d/2;r.MIDDLE=f;var h=65;r.TILE_SIZE=h;var p=5;r.NUM_PEG_TYPES=p;var v=4;r.NUM_TILE_TYPES=v;var y=.8;r.Y_HEX_FACTOR=y;var g=600;r.FALL_DURATION=g;var _=200;r.DEATH_DURATION=_;var P=0;r.DEATH_ALPHA=P;var E={x:0,y:0};r.DEATH_SCALE=E;var m=200;r.JUMP_DURATION=m},{}],8:[function(t,e,r){"use strict";function i(t){return a.BOARD_SIZE-t*a.TILE_SIZE/2}function o(t,e){var r=t*a.TILE_SIZE+i(e),o=e*a.TILE_SIZE*a.Y_HEX_FACTOR;return{x:r,y:o}}function n(t){var e=Math.round(t.y/a.TILE_SIZE/a.Y_HEX_FACTOR),r=Math.round((t.x-i(e))/a.TILE_SIZE);return{x:r,y:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.getGamePosition=o,r.getGridPosition=n;var a=t("./constants")},{"./constants":7}]},{},[1]);