!function t(e,r,i){function n(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return n(r?r:t)},c,c.exports,t,e,r,i)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(t,e,r){for(var i=!0;i;){var n=t,o=e,a=r;i=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(n);if(null===l)return;t=l,e=o,r=a,i=!0,s=l=void 0}},s=t("./states/GameState"),u=i(s),l=function(t){function e(){n(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,500,500,Phaser.AUTO,"content",null),this.state.add("GameState",u["default"],!1),this.state.start("GameState")}return o(e,t),e}(Phaser.Game);new l},{"./states/GameState":4}],2:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=t("../utils/constants"),o=1,a=function s(t,e,r,a){i(this,s),this.id=o++,this.game=t,this.sprite=this.game.add.sprite(r,a,"pegs",Math.floor(Math.random()*n.NUM_PEG_TYPES),e),this.sprite.anchor.x=.5,this.sprite.anchor.y=.8,this.sprite.inputEnabled=!0};r["default"]=a,e.exports=r["default"]},{"../utils/constants":7}],3:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(t,e,r){for(var i=!0;i;){var n=t,o=e,a=r;i=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(n);if(null===l)return;t=l,e=o,r=a,i=!0,s=l=void 0}},a=.5,s=.375,u=function(t){function e(t,r,n,u,l){i(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,r,n,"tiles",0),this.anchor.x=a,this.anchor.y=s,this.inputEnabled=!0,this.events.onInputUp.add(u,l)}return n(e,t),e}(Phaser.Sprite);r["default"]=u,e.exports=r["default"]},{}],4:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function(t,e,r){for(var i=!0;i;){var n=t,o=e,a=r;i=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(n);if(null===l)return;t=l,e=o,r=a,i=!0,s=l=void 0}},u=t("../utils/Grid"),l=i(u),c=t("../objects/Peg"),f=i(c),d=t("../objects/Tile"),h=i(d),p=t("../utils/position"),v=t("../utils/animations"),y=t("../utils/constants"),g="images/tiles.png",E="images/pegs.png",_=3355443,P={fill:"#ffffff"},m=function(t){function e(){n(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),a(e,[{key:"preload",value:function(){this.game.load.audio("jump",y.AUDIO_JUMP_URI),this.game.load.audio(y.AUDIO_ERROR_ID,y.AUDIO_ERROR_URI),this.game.load.spritesheet("tiles",g,65,89,y.NUM_TILE_TYPES),this.game.load.spritesheet("pegs",E,40,66,y.NUM_PEG_TYPES),this.game.load.image("reset",y.RESET_URI,190,49)}},{key:"create",value:function(){this.game.stage.backgroundColor=_,this.boardGroup=this.game.add.group(void 0,"board"),this.tilesGroup=this.game.add.group(this.boardGroup,"tiles"),this.pegsGroup=this.game.add.group(this.boardGroup,"pegs"),this.deadPegsGroup=this.game.add.group(this.boardGroup,"deadPegs"),this.grid=new l["default"](y.BOARD_SIZE);var t=!0,e=!1,r=void 0;try{for(var i,n=this.grid[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value,a=o.x,s=o.y,u=(0,p.getGamePosition)(a,s);this.addTile(u)}}catch(c){e=!0,r=c}finally{try{!t&&n["return"]&&n["return"]()}finally{if(e)throw r}}this.boardGroup.x=y.MIDDLE,this.boardGroup.y=1.6*(y.MIDDLE-this.boardGroup.height/2),this.game.add.button(0,0,"reset",this.reset,this),this.isPopulated=!1,this.endMessage=this.game.add.text(this.world.width-20,14,"",P),this.endMessage.anchor.x=1,this.endMessage.alpha=0}},{key:"populate",value:function(t){this.isPopulated=!0;var e=!0,r=!1,i=void 0;try{for(var n,o=this.grid[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,s=a.x,u=a.y,l=(0,p.getGamePosition)(s,u);(s!==t.x||u!==t.y)&&(this.addPeg(l),this.grid.fill({x:s,y:u}))}}catch(c){r=!0,i=c}finally{try{!e&&o["return"]&&o["return"]()}finally{if(r)throw i}}}},{key:"reset",value:function(){var t=this;this.isPopulated=!1,this.grid.emptyAll(),this.pegsGroup.children.slice().forEach(function(e){t.kill(e)}),(0,v.fadeOut)(this.endMessage)}},{key:"addTile",value:function(t){var e=t.x,r=t.y,i=new h["default"](this.game,e,r,this.onTileClick,this);this.tilesGroup.add(i)}},{key:"onTileClick",value:function(t){var e=(0,p.getGridPosition)(t);this.excited?this.jumpTo(e):this.isPopulated||this.populate(e)}},{key:"jumpTo",value:function(t){this.game.sound.play("jump");var e=(0,p.getGridPosition)(this.excited),r=this.grid.isValidMove(e,t);if(!r)return this.disappoint();var i=this.grid.getMiddle(e,t);this.grid.empty(e),this.grid.empty(i),this.grid.fill(t);var n=(0,p.getGamePosition)(t.x,t.y);(0,v.slide)(this.excited,n),this.excitedTween.loop(!1),this.excited=null;var o=this.getPegAt(i);this.kill(o)}},{key:"kill",value:function(t){var e=this;this.game.tweens.create(t).to({alpha:y.DEATH_ALPHA},y.DEATH_DURATION).start();var r=this.game.tweens.create(t.scale).to(y.DEATH_SCALE,y.DEATH_DURATION);r.onComplete.add(function(){t.destroy(),e.checkPegs()}),r.start(),this.pegsGroup.remove(t),this.deadPegsGroup.add(t)}},{key:"getPegAt",value:function(t){var e=t.x,r=t.y,i=this.pegsGroup.children.find(function(t){var i=(0,p.getGridPosition)(t);return i.x===e&&i.y===r?!0:!1});return i}},{key:"addPeg",value:function(t){var e=t.x,r=t.y,i=new f["default"](this.game,this.pegsGroup,e,r);return i.sprite.events.onInputUp.add(this.onPegClick,this),(0,v.fallIn)(i.sprite),i}},{key:"onPegClick",value:function(t){this.excited&&this.disappoint();var e=(0,p.getGridPosition)(t);this.grid.hasValidMoves(e)?(this.excite(t),this.selected=t):(0,v.shake)(t)}},{key:"excite",value:function(t){this.excited=t,this.excitedTween=(0,v.excite)(t)}},{key:"disappoint",value:function(){(0,v.shake)(this.excited),this.excitedTween.loop(!1),this.excited=null}},{key:"checkPegs",value:function(){var t=this;this.pegsGroup.forEach(function(e){var r=(0,p.getGridPosition)(e);e.alive=t.grid.hasValidMoves(r)}),null===this.pegsGroup.getFirstAlive()&&this.end()}},{key:"end",value:function(){var t=this.pegsGroup.countDead();0!==t&&(this.endMessage.text=y.END_MESSAGES[0],4>t&&(this.endMessage.text=y.END_MESSAGES[t]),(0,v.fadeIn)(this.endMessage))}}]),e}(Phaser.State);r["default"]=m,e.exports=r["default"]},{"../objects/Peg":2,"../objects/Tile":3,"../utils/Grid":5,"../utils/animations":6,"../utils/constants":7,"../utils/position":8}],5:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=t("./constants"),a=function(){function t(e){i(this,t),this.size=e,this.rows=new Array(e);for(var r=0;e>r;r++){var n=new Array(r+1);n.fill(o.EMPTY),this.rows[r]=n}}return n(t,[{key:Symbol.iterator,value:function(){var t=this,e=0,r=0;return{next:function(){var i=r===t.size,n=i?void 0:t.rows[r][e],o={x:e,y:r,id:n};return e===r?(e=0,r++):e++,{value:o,done:i}}}}},{key:"getPosition",value:function(t){var e=t.x,r=t.y,i=this.rows[r];return void 0!==i?i[e]:void 0}},{key:"empty",value:function(t){var e=t.x,r=t.y;this.rows[r][e]=o.EMPTY}},{key:"emptyAll",value:function(){var t=!0,e=!1,r=void 0;try{for(var i,n=this[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value,a=o.x,s=o.y;this.empty({x:a,y:s})}}catch(u){e=!0,r=u}finally{try{!t&&n["return"]&&n["return"]()}finally{if(e)throw r}}}},{key:"fill",value:function(t){var e=t.x,r=t.y;this.rows[r][e]=o.FULL}},{key:"log",value:function(){for(var t=0;t<this.size;t++)console.log(this.rows[t])}},{key:"isEmpty",value:function(t){var e=t.x,r=t.y;return this.getPosition({x:e,y:r})===o.EMPTY}},{key:"hasValidMoves",value:function(t){var e=t.x,r=t.y,i=2,n={x:e,y:r},o=[{x:e,y:r+i},{x:e,y:r-i},{x:e-i,y:r-i},{x:e+i,y:r+i},{x:e+i,y:r},{x:e-i,y:r}];for(var a in o){var s=o[a];if(this.isValidMove(n,s))return!0}return!1}},{key:"isValidMove",value:function(t,e){var r=this.getMiddle(t,e);return this.isEmpty(r)?!1:this.isEmpty(e)?!0:!1}},{key:"getMiddle",value:function(t,e){var r=t.x-e.x,i=t.y-e.y;return{x:r/2+e.x,y:i/2+e.y}}}]),t}();r["default"]=a,e.exports=r["default"]},{"./constants":7}],6:[function(t,e,r){"use strict";function i(t){var e=t.game,r=t.x,i={x:r},n={x:r+f},o={x:r-f};return e.sound.play(l.AUDIO_ERROR_ID),e.tweens.create(t).to(o,c/4).to(n,c/2).to(i,c/4).start()}function n(t){return t.game.tweens.create(t).to({rotation:d},h,Phaser.Easing.Back.Out).to({rotation:0},h,Phaser.Easing.Linear.None).to({rotation:-d},h,Phaser.Easing.Back.Out).to({rotation:0},h,Phaser.Easing.Linear.None).loop(!0).start()}function o(t){t.game.tweens.create(t).to({alpha:1},p).start()}function a(t){t.game.tweens.create(t).to({alpha:0},p).start()}function s(t,e){t.game.tweens.create(t).to(e,v,Phaser.Easing.Back.InOut).start()}function u(t){var e=t.game,r=Math.random()*g,i={y:"-"+e.height};e.tweens.create(t).from(i,y,E).delay(r).start()}Object.defineProperty(r,"__esModule",{value:!0}),r.shake=i,r.excite=n,r.fadeIn=o,r.fadeOut=a,r.slide=s,r.fallIn=u;var l=t("./constants"),c=100,f=5,d=.05,h=90,p=200,v=200,y=600,g=200,E=Phaser.Easing.Bounce.Out},{"./constants":7}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i="error";r.AUDIO_ERROR_ID=i;var n="sounds/error.mp3";r.AUDIO_ERROR_URI=n;var o="sounds/jump.mp3";r.AUDIO_JUMP_URI=o;var a="images/return.png";r.RESET_URI=a;var s=5;r.BOARD_SIZE=s;var u=0;r.EMPTY=u;var l=1;r.FULL=l;var c=void 0;r.OFF_BOARD=c;var f=500;r.GAME_SIZE=f;var d=f/2;r.MIDDLE=d;var h=65;r.TILE_SIZE=h;var p=5;r.NUM_PEG_TYPES=p;var v=4;r.NUM_TILE_TYPES=v;var y=.8;r.Y_HEX_FACTOR=y;var g=200;r.DEATH_DURATION=g;var E=0;r.DEATH_ALPHA=E;var _={x:0,y:0};r.DEATH_SCALE=_;var P=["Just Plain Eg-no-ra-moose","You're a Genius","You're Pretty Smart","Just Plain Dumb"];r.END_MESSAGES=P},{}],8:[function(t,e,r){"use strict";function i(t){return a.BOARD_SIZE-t*a.TILE_SIZE/2}function n(t,e){var r=t*a.TILE_SIZE+i(e),n=e*a.TILE_SIZE*a.Y_HEX_FACTOR;return{x:r,y:n}}function o(t){var e=Math.round(t.y/a.TILE_SIZE/a.Y_HEX_FACTOR),r=Math.round((t.x-i(e))/a.TILE_SIZE);return{x:r,y:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.getGamePosition=n,r.getGridPosition=o;var a=t("./constants")},{"./constants":7}]},{},[1]);